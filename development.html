<!DOCTYPE html>
<html lang="en">
<head>
  <title>Map 1 Demo -- Simple Map</title>

  <script src="../webcomponentsjs/webcomponents.min.js"></script>
  <link rel="import" href="../polymer/polymer-mini.html" />

  <!-- Importing for the demo only... -->
  <link rel="import" href="css/px-map-styles.html">
  <style include="px-map-styles" is="custom-style"></style>
  <link rel="import" href="../iron-ajax/iron-ajax.html" />

  <!-- Importing px-map subcomponents... -->
  <link rel="import" href="px-map.html" />
  <!-- <link rel="import" href="px-map-overlay-layer.html" /> -->
  <link rel="import" href="px-map-layer-group.html" />
  <link rel="import" href="px-map-marker-static.html" />
  <link rel="import" href="px-map-popup-info.html" />
  <link rel="import" href="px-map-popup-data.html" />
  <link rel="import" href="px-map-tile-layer.html" />
  <link rel="import" href="px-map-control-zoom.html" />
  <!-- <link rel="import" href="px-map-info-popup.html" /> -->
  <!-- <link rel="import" href="px-map-data-popup.html" /> -->
  <!-- <link rel="import" href="px-map-info-control.html" /> -->
  <!-- <link rel="import" href="px-map-location-control.html" /> -->
  <link rel="import" href="px-map-marker-group.html" />
  <!-- <link rel="import" href="px-map-tile-layer.html" /> -->

  <!-- <link rel="import" href="mixins/px-map-mixins.html" /> -->
</head>

<style is="custom-style">
  body {
    margin: 0;
  }
  .wrap {
    display: flex;
    width: 90vw;
    height: 90vh;
    margin: 5vh 5vw;
  }
</style>
<body>
  <section class="wrap">
    <template is="dom-bind">



    <px-map zoom="10" lat="32.7157" lng="-117.1611" flex-to-size>

      <!-- <px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer> -->
      <px-map-tile-layer url="http://api.tiles.mapbox.com/v3/aj.map-b0cn5uze/{z}/{x}/{y}.png"></px-map-tile-layer>

      <px-map-control-zoom position="bottomright"></px-map-control-zoom>
      <!-- <px-map-info-control position="top-right" name="Data Box" max-width="100"></px-map-info-control> -->

      <!-- <px-map-layer-group name="Buildings">
        <px-map-marker-static lat="37.7672375" lng="-121.9584131" type="important" show-badge>
          <px-map-popup-data title="Dispatch Hub: San Ramon" data='{ "Description" : "NSS 177 ROAD", "Milepost" : "50", "DIV/SUB" : "Bakersfield, CA", "Next Test" : "9/12/16" }'></px-map-data-popup>
        </px-map-marker-static>
        <px-map-marker-static lat="37.9055234" lng="-122.0675267" type="info" show-badge>
          <px-map-popup-info title="Walnut Creek BART" description="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum labore voluptatem in sapiente qui tenetur ipsa enim assumenda pariatur velit aperiam dolore a eveniet cupiditate at explicabo."></px-map-popup-info>
        </px-map-marker-static>
      </px-map-layer-group> -->

      <px-map-marker-group id="cluster" name="Plaques" data="{{geoJSON}}"></px-map-marker-group>
    </px-map>

    <iron-ajax url="geojson-markers2.json" last-response="{{geoJSON}}" auto></iron-ajax>

    </template>
  </section>
  <script>
  // var geoJSON = {
  //   "type": "FeatureCollection",
  //   "features": [
  //     {
  //       "type": "Feature",
  //       "geometry": {
  //         "type": "Point",
  //         "coordinates": [
  //           -0.14572,
  //           51.46206
  //         ]
  //       },
  //       "properties": {
  //         "title": "Charles Barry blue plaque",
  //         "marker-icon": {
  //           "icon-class": "StaticIcon",
  //           "icon-status": "info",
  //           "icon-with-badge": true
  //         }
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "geometry": {
  //         "type": "Point",
  //         "coordinates": [
  //           -0.02088,
  //           51.50484
  //         ]
  //       },
  //       "properties": {
  //         "title": "Grey plaque № 8942",
  //         "marker-icon": {
  //           "icon-class": "StaticIcon",
  //           "icon-status": "important",
  //           "icon-with-badge": true
  //         }
  //       }
  //     },
  //     {
  //       "type": "Feature",
  //       "geometry": {
  //         "type": "Point",
  //         "coordinates": [
  //           -0.29018,
  //           51.489
  //         ]
  //       },
  //       "properties": {
  //         "title": "Grey plaque № 9850",
  //         "marker-icon": {
  //           "icon-class": "StaticIcon",
  //           "icon-status": "info",
  //           "icon-with-badge": true
  //         }
  //       }
  //     }
  //   ]
  // };

  // function setResponse() {
  //   var data = this.req.lastResponse;
  //   this.cluster.set('data', data);
  // }
  //
  // function bindData() {
  //   this.cluster = document.querySelector('#cluster');
  //   this.req = document.querySelector('#getData');
  //   this.req.generateRequest();
  //   Polymer.Base.async(setResponse.bind(this), 10);
  // }
  //
  // setTimeout(bindData, 2);
  </script>
</body>
</html>
