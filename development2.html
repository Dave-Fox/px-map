<!DOCTYPE html>
<html lang="en">
<head>
  <title>Map 1 Demo -- Simple Map</title>

  <!-- <script src="../webcomponentsjs/webcomponents.min.js"></script>
  <link rel="import" href="../polymer/polymer.html" /> -->

  <!-- Importing for the demo only... -->
  <link rel="import" href="css/px-map-styles.html">
  <style include="px-map-styles" is="custom-style"></style>
  <link rel="import" href="../iron-ajax/iron-ajax.html" />

  <!-- Importing px-map subcomponents... -->
  <link rel="import" href="px-map.html" />
  <!-- <link rel="import" href="px-map-overlay-layer.html" /> -->
  <link rel="import" href="px-map-layer-group.html" />
  <link rel="import" href="px-map-marker-static.html" />
  <link rel="import" href="px-map-popup-info.html" />
  <link rel="import" href="px-map-popup-data.html" />
  <link rel="import" href="px-map-tile-layer.html" />
  <link rel="import" href="px-map-control-zoom.html" />
  <link rel="import" href="px-map-control-locate.html" />
  <link rel="import" href="px-map-control-info.html" />
  <link rel="import" href="px-map-marker-locate.html" />
  <!-- <link rel="import" href="px-map-info-popup.html" /> -->
  <!-- <link rel="import" href="px-map-data-popup.html" /> -->
  <!-- <link rel="import" href="px-map-info-control.html" /> -->
  <!-- <link rel="import" href="px-map-location-control.html" /> -->
  <link rel="import" href="px-map-marker-group.html" />
  <!-- <link rel="import" href="px-map-tile-layer.html" /> -->

  <!-- <link rel="import" href="mixins/px-map-mixins.html" /> -->
</head>

<style is="custom-style">
  body {
    margin: 0;
  }
  .wrap {
    display: flex;
    width: 90vw;
    height: 90vh;
    margin: 5vh 5vw;
  }
</style>
<body>
  <section class="wrap">
    <template is="dom-bind">
      <px-map zoom="10" zoom="16" flex-to-size fit-to-markers>

        <!-- <px-map-tile-layer url="http://api.tiles.mapbox.com/v3/aj.map-b0cn5uze/{z}/{x}/{y}.png"></px-map-tile-layer> -->
        <px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer>

        <px-map-control-zoom position="bottomright"></px-map-control-zoom>
        <px-map-control-locate position="bottomright" move-to-location move-max-zoom="12" last-found-location="{{location}}"></px-map-control-locate>
        <px-map-control-info position="topright" content="<p>Hello</p>"></px-map-control-info>

        <px-map-layer-group name="Buildings">
          <px-map-marker-static lat="37.7672375" lng="-121.9584131" type="important" show-badge>
            <px-map-popup-data title="Dispatch Hub: San Ramon" data='{ "Description" : "NSS 177 ROAD", "Milepost" : "50", "DIV/SUB" : "Bakersfield, CA", "Next Test" : "9/12/16" }'></px-map-data-popup>
          </px-map-marker-static>

          <!-- <px-map-marker-locate lat="{{location.lat}}" lng="{{location.lng}}" accuracy="{{location.accuracy}}"></px-map-marker-locate> -->
          <px-map-marker-locate lat="39.7672375" lng="-121.9584131" accuracy="200"></px-map-marker-locate>

          <px-map-marker-static lat="37.9055234" lng="-122.0675267" type="info" show-badge>
            <px-map-popup-info title="Walnut Creek BART" description="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum labore voluptatem in sapiente qui tenetur ipsa enim assumenda pariatur velit aperiam dolore a eveniet cupiditate at explicabo."></px-map-popup-info>
          </px-map-marker-static>
        </px-map-layer-group>

      </px-map>
    </template>

    <script>

    window.addEventListener('WebComponentsReady', function(){
      var map = document.querySelector('px-map');
      var control = document.querySelector('px-map-control-locate');
      control.addEventListener('px-map-control-locate-error', function(evt) {
        console.log('Error finding location: ' + (evt.detail && evt.detail.message) ? evt.detail.message : '');
        // var rect = L.rectangle(evt.detail.bounds, {color: "#ff7800", weight: 1}).addTo(map.elementInst);
      });
    });
    </script>
  </section>
</body>
</html>
