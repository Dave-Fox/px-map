/*
 * Copyright (c) 2014 GE Global Research. All rights reserved.
 *
 * The copyright to the computer software herein is the property of
 * GE Global Research. The software may be used and/or copied only
 * with the written permission of GE Global Research or in accordance
 * with the terms and conditions stipulated in the agreement/contract
 * under which the software has been supplied.
 */

//
// Sass for the for the px-map component
//
// @author
//

// Settings
@import "px-colors-design/_settings.colors.scss";

// Tools
// ...

// Generic
@import "px-normalize-design/_generic.normalize.scss";
@import "px-box-sizing-design/_generic.box-sizing.scss";
@import "px-helpers-design/_generic.helpers.scss";

// Base
@import "px-typography-design/_base.typography.scss";
@import "px-flexbox-design/_base.flexbox.scss";
@import "px-viewport-design/_base.viewport.scss";

// Meta
@import "px-meta-buttons-design/_meta.buttons.scss";

// Objects
// ...

// Component

/*
 * Override Leaflet's styles
 */
.leaflet-container {
  font-family: $predix-font-family;
  font-size: $inuit-base-font-size;
  line-height: $inuit-base-line-height;
}

/*******************************************************************************
 * ICONS (Attached to markers)
 ******************************************************************************/

// MAP ICON: BASE
@import "_map-icon.scss";

// MAP ICON: STATIC
@import "_map-icon-static.scss";

/*******************************************************************************
 * POPUPS
 ******************************************************************************/

/* POPUP: Base styles for a popup */

%map-popup {
  // The wrapper container around the popup content. Expands to the maximum
  // allowable size set on the attribute (not configured in CSS).
  .leaflet-popup-content-wrapper {
    border: 1px solid $gray5;
    border-radius: 0;
  }
  // To set a border color on the content wrapper, we need to position a psuedo
  // after element that is the same color as the popup background to make it look
  // like the border doesn't overlap the popup 'tip' pointer
  .leaflet-popup-content-wrapper:after {
    content: '';
    position: absolute;
    background-color: white;
    height: 4px;
    width: 19px;
    left: 50%;
    margin-left: -9px;
    border-radius: 5px;
  }
  // Add the border to the 'tip' pointer
  .leaflet-popup-tip {
    border: 1px solid $gray5;
  }
  // The inner container holding the popup content
  .leaflet-popup-content {
    margin: 0;
  }
  // Hide the close button
  .leaflet-popup-close-button {
    display: none;
  }
}

/* POPUP: info-popup */
/* POPUP: data-popup */

.map-info-popup, .map-data-popup {
  @extend %map-popup;
}
.map-info-popup .map-info-box {
  margin: $inuit-base-spacing-unit;
}
.map-data-popup .map-data-box {
  margin: $inuit-base-spacing-unit;
}


/*******************************************************************************
 * CONTROLS
 ******************************************************************************/

/* CONTROL: Info control */

.map-info-control {
  background-color: white;
  max-width: 250px;
}
.map-info-control .map-info-box {
  margin: $inuit-base-spacing-unit;
}
.map-info-control .map-data-box {
  border: 1px solid $gray4;
}

/* CONTROL: Zoom control */

%map-control-button {
  width: calculateRem(40px);
  height: calculateRem(40px);
  background-color: var(--px-map-control-button-background, $white);
  color: var(--px-map-control-button-text-color, $primary-blue);
  border-style: solid;
  border-width: var(--pax-map-control-button-border-width, 3px);
  border-color: var(--pax-map-control-button-border-color, rgba(0,0,0,.3));

  border-radius: 15%;
  line-height: calculateRem(36px);
  font-size: calculateRem(20px);
  font-weight: 400;

  &:hover {
    background-color: var(--px-map-control-button-background, $gray3);
  }
}
%map-control-button--zoom {
  border-radius: 100%;
}

.leaflet-bar {
  border: none;
  border-radius: 0;
}
.leaflet-bar a {
  @extend %map-control-button;
}
.leaflet-bar a + a {
  margin-top: .25rem;
}

.leaflet-control-zoom a.leaflet-control-zoom-in,
.leaflet-control-zoom a.leaflet-control-zoom-out {
  @extend %map-control-button--zoom;
}

/*******************************************************************************
 * GENERIC BOXES
 *
 * A `box` is a collection of information that can be placed into multiple
 * containers, like a `popup` or a `control`.
 ******************************************************************************/

 /* GENERIC: Info box generic styles, can be placed in multiple containers */

// Style for the title, which is a text tag
.map-info-box__title {
  font-weight: 600;
  margin: 0 0 $inuit-base-spacing-unit--tiny;
}
// Style for the description, which is a text tag
.map-info-box__description {
  margin: 0;
}
// Style for the optional image, which is set to the left of the content
.map-info-box__image {
  display: block;
  float: left;
  max-width: 75px;
  margin-right: $inuit-base-spacing-unit--small;
  img {
    max-width: 100%;
    height: auto;
  }
}
// We need the content container to be a block with overflow hidden to
// inset the picture to the left without text wrapping.
.map-info-box__content {
  display: block;
  overflow: hidden;
}

/* GENERIC: Data box generic styles, can be placed in multiple containers */

.map-data-box {
}
.map-data-box__header {
  padding: calculateRem(10px);
}
.map-data-box__header__text {
  text-transform: uppercase;
  font-size: calculateRem(12px);
  line-height: calculateRem(14px);
  margin: 0;
}
.map-data-box__table {
  display: flex;
  flex-wrap: wrap;
}
.map-data-box__table__cell {
  flex-grow: 1;
  overflow: hidden;
  width: 50%;

  border-top: 1px solid $gray4;
  &:nth-child(2n) { border-left: 1px solid $gray4; }

  padding: calculateRem(10px);
  text-transform: uppercase;
  font-size: calculateRem(12px);
  line-height: calculateRem(14px);
  p { margin: 0; }
}


// Trumps
@import "inuit-clearfix/_trumps.clearfix.scss";
@import "px-spacing-responsive-design/_trumps.spacing-responsive.scss";
@import "px-widths-responsive-design/_trumps.widths-responsive.scss";
