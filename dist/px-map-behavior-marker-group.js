'use strict';(function(){'use strict';var MarkerGroupImpl={properties:{name:{type:String,notify:true},data:{type:Object,observer:'shouldUpdateInst'}},listeners:{'px-map-layer-instance-created':'shouldUpdateInst'},categoryById:{0:'unknown',1:'info',2:'warning',3:'important'},categoryByName:{'unknown':0,'info':1,'warning':2,'important':3},createInst:function createInst(){this._markers=this._markers||new Map;return new PruneClusterForLeaflet},updateInst:function updateInst(lastOptions,nextOptions){if(nextOptions.data&&nextOptions.data.features&&nextOptions.data.features.length){this._updateMarkers(nextOptions.data.features);this.fire('px-map-marker-add')}},getOptions:function getOptions(){return{data:this.data||{}}},_updateMarkers:function _updateMarkers(features){if(!features||!(features instanceof Array)||!features.length)return;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=features[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var feature=_step.value;if(this._markers.has(feature))continue;var marker=this._createMarker(feature);this.elementInst.RegisterMarker(marker);this._markers.set(feature,marker)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}},_createMarker:function _createMarker(feature){var marker=new PruneCluster.Marker(feature.geometry.coordinates[1],feature.geometry.coordinates[0]);marker.data.icon=this.getIcon.bind(this);if(feature.properties['marker-icon']&&feature.properties['marker-icon']['icon-status']&&this.categoryByName[feature.properties['marker-icon']['icon-status']]){marker.category=this.categoryByName[feature.properties['marker-icon']['icon-status']]}return marker},getIcon:function getIcon(data,category){return this.createStaticIcon(this.getIconOptions(category))},getIconOptions:function getIconOptions(category){return this.getStaticIconOptions({type:this.categoryById[category]})}};var namespace=window.PxMapBehavior=window.PxMapBehavior||{};namespace.MarkerGroup=[namespace.LayerBase,namespace.Common.StaticIconMethods,MarkerGroupImpl]})();
//# sourceMappingURL=px-map-behavior-marker-group.js.map
