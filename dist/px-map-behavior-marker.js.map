{"version":3,"sources":["px-map-behavior-marker.es6.js"],"names":["MapMarkerBase","properties","lat","type","Number","notify","observer","lng","name","String","canAddInst","createInst","options","L","marker","geometry","config","updateInst","lastOptions","nextOptions","elementInst","setLatLng","icon","setIcon","getInstOptions","defaults","getMarkerLatLng","extend","title","getMarkerIcon","latLng","Error","MapMarkerStaticBase","reflectToAttribute","value","showBadge","Boolean","markerIcon","_getMarkerIconOptions","PxMap","IconStatic","_updateMarkerIcon","shouldUpdateInst","badge","namespace","window","PxMapBehavior","MapMarker","MapLayerParent","MapMarkerStatic"],"mappings":"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","file":"px-map-behavior-marker.js","sourcesContent":["(function() {\n  'use strict';\n\n  /**\n   *\n   * @polymerBehavior PxMapBehavior.MapMarkerBase\n   */\n  const MapMarkerBase = {\n    properties: {\n      /**\n       * The latitude of the marker. Set a value to draw the maker at a coordinate\n       * when the map is loaded. Listen for updates to track the marker's location\n       * if the marker is draggable or created dynamically by the user.\n       *\n       * @type {Number}\n       */\n      lat: {\n        type: Number,\n        notify: true,\n        observer: 'shouldUpdateInst'\n      },\n\n      /**\n       * The longitude of the marker. Set a value to draw the maker at a coordinate\n       * when the map is loaded. Listen for updates to track the marker's location\n       * if the marker is draggable or created dynamically by the user.\n       *\n       * @type {Number}\n       */\n      lng: {\n        type: Number,\n        notify: true,\n        observer: 'shouldUpdateInst'\n      },\n\n      /**\n       * A human-readable name for this layer group. If a tooltip is attached,\n       * this name will be shown on hover over the marker. If the map has a layer\n       * control panel, the user will click this name to show, hide, or\n       * manipulate this layer.\n       *\n       * @type {String}\n       */\n      name: {\n        type: String,\n        notify: true,\n        observer: 'shouldUpdateInst'\n      }\n    },\n\n    // DEFAULT METHODS FOR EVERY BASE ELEMENT...\n\n    canAddInst() {\n      return (typeof this.lat === 'number') && (typeof this.lng === 'number');\n    },\n\n    createInst(options) {\n      return L.marker(options.geometry, options.config);\n    },\n\n    updateInst(lastOptions, nextOptions) {\n      if (lastOptions.geometry !== nextOptions.geometry) {\n        this.elementInst.setLatLng(nextOptions.geometry);\n      }\n      if (lastOptions.config.icon !== nextOptions.config.icon) {\n        this.elementInst.setIcon(nextOptions.config.icon);\n      }\n    },\n\n    getInstOptions(defaults={}) {\n      const geometry = this.getMarkerLatLng();\n      if (defaults.geometry) this.extend(geometry, defaults.geometry);\n\n      const config = {};\n      config.title = (this.name || '');\n      config.icon = this.getMarkerIcon();\n      if (defaults.config) this.extend(config, defaults.config);\n\n      return { geometry, config };\n    },\n\n    // CUSTOM METHODS FOR MARKERS...\n\n    getMarkerLatLng() {\n      if (!this.lat || !this.lng) return [];\n      return L.latLng(this.lat, this.lng);\n    },\n\n    // SHOULD BE IMPLEMENTED WHEN EXTENDING...\n\n    getMarkerIcon() {\n      throw new Error('The `getMarkerIcon` method must be implemented.');\n    }\n  };\n\n  /**\n   *\n   * @polymerBehavior PxMapBehavior.MapMarkerStaticBase\n   */\n  const MapMarkerStaticBase = {\n    properties: {\n      /**\n       * The visual type of the marker. Sets the color of the marker to indicate\n       * the state of the thing it represents. Choose from 'important', 'warning',\n       * or 'info', or 'unknown'. Defaults to 'info'.\n       *\n       * @type {String}\n       */\n      type: {\n        type: String,\n        reflectToAttribute: true,\n        value: 'info',\n        observer: '_updateMarkerIcon'\n      },\n\n      /**\n       * Shows a small notification badge on the icon that indicates there is\n       * some relevant updated information about the marker.\n       *\n       * @type {Object}\n       */\n      showBadge: {\n        type: Boolean,\n        value: true,\n        observer: '_updateMarkerIcon'\n      }\n    },\n\n    getMarkerIcon() {\n      if (!this.markerIcon) {\n        const options = this._getMarkerIconOptions();\n        this.markerIcon = new PxMap.IconStatic(options);\n      }\n      return this.markerIcon;\n    },\n\n    _updateMarkerIcon() {\n      if (!this.markerIcon) return;\n\n      const options = this._getMarkerIconOptions();\n      this.markerIcon = new PxMap.IconStatic(options);\n\n      this.shouldUpdateInst();\n    },\n\n    _getMarkerIconOptions() {\n      return { type: this.type || '', badge: this.showBadge || false };\n    }\n  };\n\n  /* Ensures the behavior namespace is created */\n  const namespace = (window.PxMapBehavior = window.PxMapBehavior || {});\n\n  /* Bind MapMaker base and chained behaviors */\n  namespace.MapMarkerBase = MapMarkerBase;\n  namespace.MapMarker = [\n    namespace.MapLayerParent,\n    namespace.MapMarkerBase\n  ];\n\n  /* Bind MapMarkerStatic base and chained behaviors */\n  namespace.MapMarkerStaticBase = MapMarkerStaticBase;\n  namespace.MapMarkerStatic = [\n    namespace.MapMarker,\n    namespace.MapMarkerStaticBase\n  ];\n\n})()\n"]}